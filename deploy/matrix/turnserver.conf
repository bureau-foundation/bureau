# Bureau TURN server configuration for coturn.
#
# coturn relays UDP/TCP traffic for WebRTC ICE candidates that cannot
# establish direct peer-to-peer connections (symmetric NAT, firewalls,
# outbound-only networks). The shared secret must match the homeserver's
# turn_secret configuration — Continuwuity generates time-limited HMAC
# credentials from it for the /_matrix/client/v3/voip/turnServer endpoint.
#
# Required ports:
#   3478/tcp+udp  — TURN listening port
#   49152-65535/udp — media relay range

listening-port=3478
fingerprint
lt-cred-mech
use-auth-secret
static-auth-secret=${BUREAU_TURN_SECRET}
realm=bureau.local

# Relay port range for media traffic.
min-port=49152
max-port=65535

# Security: prevent relaying to private networks. Agents should only
# relay to other Bureau daemons, not probe internal infrastructure.
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=192.168.0.0-192.168.255.255
no-multicast-peers

# Resource limits.
total-quota=100
stale-nonce=600

# Logging: syslog by default, stderr when running in Docker.
log-file=stdout
no-stdout-log
